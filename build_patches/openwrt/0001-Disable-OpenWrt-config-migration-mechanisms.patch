From: Tim Niemeyer <tim@tn-x.org>
Date: Sat, 8 Jul 2017 10:46:59 +0200
Subject: Disable OpenWrt config migration mechanisms

This disables all OpenWrt config migration mechanisms except for
files listed in /etc/sysupgrade.conf

diff --git a/package/base-files/files/sbin/sysupgrade b/package/base-files/files/sbin/sysupgrade
index 935d08048e81c8c231301ac20647d340f102f930..c9d6032b70b021bf623504e5ed823fa2e9699a1d 100755
--- a/package/base-files/files/sbin/sysupgrade
+++ b/package/base-files/files/sbin/sysupgrade
@@ -134,9 +134,9 @@ list_changed_conffiles() {
 add_conffiles() {
 	local file="$1"
 	( find $(sed -ne '/^[[:space:]]*$/d; /^#/d; p' \
-		/etc/sysupgrade.conf /lib/upgrade/keep.d/* 2>/dev/null) \
+		/etc/sysupgrade.conf 2>/dev/null) \
 		\( -type f -o -type l \) $find_filter 2>/dev/null;
-	  list_changed_conffiles ) | sort -u > "$file"
+	  ) | sort -u > "$file"
 	return 0
 }
 
